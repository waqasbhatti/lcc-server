{% extends 'base.html' %}

{% block pagecss %}

<!-- Codemirror CSS -->
<link rel="stylesheet" href="{{ static_url('css/codemirror.css') }}">

{% end %}


{% block pagecontent %}

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="/">{{ page_title }}</a>
  <button class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-item nav-link active" href="/">
        Home <span class="sr-only">(current)</span>
      </a>
      <a class="nav-item nav-link" href="/docs">Docs</a>
      <a class="nav-item nav-link" href="/about">About</a>
    </div>
  </div>
  <form class="form-inline">
    <select class="custom-select form-control" id="qt" name="qt">
      <option value="conesearch" selected>Quick cone search</option>
      <option value="objectidsearch">Quick object search</option>
      <option value="xmatchsearch">Quick cross-match search</option>
    </select>
    <div class="input-group">
      <input class="form-control ml-sm-2" id="q" name="q"
             type="search"
             placeholder="[RA] [Dec] [optional radius (arcmin)]"
             aria-label="Search">
      <div class="input-group-append">
        <button class="btn btn-outline-success my-2 my-sm-0"
                type="submit">Go</button>
      </div>
    </div>
  </form>
</nav>

<div class="container-fluid">

  <div class="row mt-4 search-controls">

    <div class="col-9">

      <ul class="nav nav-tabs" id="myTab" role="tablist">

        <li class="nav-item">
          <a class="nav-link active tab-link"
             id="columns-tab"
             data-toggle="tab"
             href="#columns"
             role="tab"
             aria-controls="columns"
             aria-selected="true">
            <img src="{{ static_url('images/ic_search_black_48px.svg') }}"><br>
            Search by columns
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link tab-link"
             id="conesearch-tab"
             data-toggle="tab"
             href="#conesearch"
             role="tab"
             aria-controls="conesearch"
             aria-selected="false">
            <img src="{{ static_url('images/ic_filter_tilt_shift_black_48px.svg') }}"><br>
            Search by coordinates
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link tab-link"
             id="xmatch-tab"
             data-toggle="tab"
             href="#xmatch"
             role="tab"
             aria-controls="xmatch"
             aria-selected="false">
            <img src="{{ static_url('images/ic_cloud_upload_black_48px.svg') }}"><br>
            Search for cross-matches
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link tab-link"
             id="sql-tab"
             data-toggle="tab"
             href="#sql"
             role="tab"
             aria-controls="sql"
             aria-selected="false">
            <img src="{{ static_url('images/ic_speaker_notes_black_48px.svg') }}"><br>
            Run an SQL query
          </a>
        </li>

      </ul>


      <div class="tab-content" id="myTabContent">

        <div class="tab-pane show active"
             id="columns" role="tabpanel" aria-labelledby="columns-tab">

          <div class="row mt-2">
            <div class="col-12">
              columns
            </div>
          </div>

        </div>

        <div class="tab-pane"
             id="conesearch" role="tabpanel" aria-labelledby="conesearch-tab">

          <div class="row mt-2">
            <div class="col-12">
              cone
            </div>
          </div>

        </div>

        <div class="tab-pane"
             id="xmatch" role="tabpanel" aria-labelledby="xmatch-tab">

          <div class="row mt-2">
            <div class="col-12">
              xmatch
            </div>
          </div>

        </div>

        <div class="tab-pane"
             id="sql" role="tabpanel" aria-labelledby="sql-tab">

          <div class="row mt-2">
            <div class="col-12">
              sql
            </div>
          </div>

        </div>

      </div>

    </div>

    <!-- notifications go in here -->
    <div class="col-3">



    </div>

  </div>

  <div class="row mt-2 lc-collection-overview">

    <div class="col-12">
      <h3>Available light curve collections</h3>

      <table id="lcc-collections-table" class="table table-hover table-sm">

        <thead class="bg-light">
          <tr>
            <th scope="col" width="200">Name</th>
            <th scope="col" width="250">Description</th>
            <th scope="col" width="100">Objects</th>
            <th scope="col" width="100">Center<br>(RA, Dec)</th>
            <th scope="col" width="150">Extent<br>(RA, Dec)</th>
            <th scope="col" width="150">Columns<br>
              <span class="fts-col">full text search
                available</span>,
              <span class="kdtree-col">spatial index search available</span>
            </th>
          </tr>
        </thead>

        <tbody id="lcc-collection-tablerows">

          <tr>

            <td>
              HATNet Kepler field observations (<code>hatnet_kepler_field</code>)
            </td>

            <td>
              Light curves from the HATNet Exoplanet Survey's
              observations of the Kepler Field from 2004 to 2014.
            </td>

            <td>
              404563
            </td>

            <td>
              290.0, 45.0
            </td>

            <td>
              (240.0, 25.0) to<br>(350.0, 60.0)
            </td>

            <td>
              <code>abs_gaiamag,
                aep_000.beyond1std, <span class="fts-col">aep_000.comments</span>,
                aep_000.eta_normal, aep_000.kurtosis,
                aep_000.linear_fit_slope, aep_000.mad, aep_000.mag_iqr,
                aep_000.magnitude_ratio, aep_000.median,
                aep_000.objectisvar, aep_000.skew, aep_000.stdev,
                aep_000.stetsonj, aep_000.stetsonk, aep_000.varepoch,
                aep_000.varperiod, <span class="fts-col">aep_000.vartags</span>,
                bmag, <span class="fts-col">color_classes</span>,
                <span class="kdtree-col">decl</span>,
                extinction_bmag, extinction_hmag, extinction_imag,
                extinction_jmag, extinction_kmag, extinction_rmag,
                extinction_sdssg, extinction_sdssi, extinction_sdssr,
                extinction_sdssu, extinction_sdssz, extinction_vmag,
                gaia_id, gaia_parallax, gaia_parallax_err, gaia_status,
                gaiamag, gb, gl, hmag, imag, jmag, kmag, lcfname, ndet,
                ndet_aep_000,
                ndet_atf_000, <span class="fts-col">objectid</span>,
                <span class="fts-col">objecttags</span>, pmdecl, pmra,
                propermotion, <span class="kdtree-col">ra</span>, rmag,
                rpmj, sdssg, sdssi, sdssr, sdssu,
                sdssz, <span class="fts-col">twomassid</span>, vmag
              </code>
            </td>

          </tr>

        </tbody>

      </table>

    </div>
  </div>

</div>
{% end %}


{% block pagejs_modules %}

<!-- mathjs -->
<script src="{{ static_url('js/math.min.js') }}"></script>

<!-- code mirror js -->
<script src="{{ static_url('js/codemirror.min.js') }}"></script>

<!-- our own js modules -->
<script src="{{ static_url('js/lcc-server.js') }}"></script>

{% end %}


{% block pagejs %}

$(document).ready(function() {


// UI action setup
lccui.action_setup();


});

{% end %}
